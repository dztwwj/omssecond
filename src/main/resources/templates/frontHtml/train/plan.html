<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->


    <!-- Title -->
    <title>瓜皮公司</title>

    <!-- Favicon -->
    <link rel="icon" href="../img/core-img/favicon.ico">

    <!-- Core Stylesheet -->
    <link rel="stylesheet" href="../style.css">

    <!-- ##### All Javascript Files ##### -->
    <!-- jQuery-2.2.4 js -->
    <script src="../js/jquery/jquery-2.2.4.min.js"></script>
    <!-- 引入样式 -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/axios.min.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- Popper js -->
    <script src="../js/bootstrap/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="../js/bootstrap/bootstrap.min.js"></script>
    <!-- All Plugins js -->
    <script src="../js/plugins/plugins.js"></script>
    <!-- Active js -->
    <script src="../js/active.js"></script>
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/axios.min.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!--<link rel="stylesheet" href="../css/elementui.css">-->
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!--<script src="../js/elementui.js"></script>-->

</head>

<body>
    <!-- Preloader -->
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-circle"></div>
        <div class="preloader-img">
            <img src="../img/core-img/leaf.png" alt="">
        </div>
    </div>

    <!-- ##### Header Area Start ##### -->
    <header class="header-area">

        <!-- ***** Top Header Area ***** -->
        <div class="top-header-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="top-header-content d-flex align-items-center justify-content-between">
                            <!-- Top Header Content -->
                            <div class="top-header-meta">
                                <a href="#" data-toggle="tooltip" data-placement="bottom" title="infodeercreative@gmail.com"><i class="fa fa-envelope-o" aria-hidden="true"></i> <span>Email: infodeercreative@gmail.com</span></a>
                                <a href="#" data-toggle="tooltip" data-placement="bottom" title="+1 234 122 122"><i class="fa fa-phone" aria-hidden="true"></i> <span>Call Us: +1 234 122 122</span></a>
                            </div>

                            <!-- Top Header Content -->
                            <div class="top-header-meta d-flex">
                                <!-- Language Dropdown -->
                                <div class="language-dropdown">
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle mr-30" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Language</button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">USA</a>
                                            <a class="dropdown-item" href="#">UK</a>
                                            <a class="dropdown-item" href="#">Bangla</a>
                                            <a class="dropdown-item" href="#">Hindi</a>
                                            <a class="dropdown-item" href="#">Spanish</a>
                                            <a class="dropdown-item" href="#">Latin</a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Login -->
                                <div class="login">
                                    <a href="#"><i class="fa fa-user" aria-hidden="true"></i> <span>登录</span></a>
                                </div>
                                <!-- Cart -->
                                <!-- <div class="cart">
                                    <a href="#"><i class="fa fa-shopping-cart" aria-hidden="true"></i> <span>Cart <span class="cart-quantity">(1)</span></span></a>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ***** Navbar Area ***** -->
        <div class="alazea-main-menu">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Menu -->
                    <nav class="classy-navbar justify-content-between" id="alazeaNav">

                        <!-- Nav Brand -->
                        <a href="index.html" class="nav-brand"><img src="../img/core-img/logo1.jpg" width="80px" height="22px" alt=""></a>

                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>

                        <!-- Menu -->
                        <div class="classy-menu">

                            <!-- Close Button -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>

                            <!-- Navbar Start -->
                            <div class="classynav">
                                <ul>
                                    <li><a href="index.html">首页</a></li>
                                    <li><a href="about.html">新闻中心</a></li>
									<li><a href="shop.html">车辆管理</a></li>
									<li><a href="http://localhost:8888/plan/toplantwo">培训计划与实施</a></li>
									<li><a href="http://localhost:8888/user/toList">招聘信息</a></li>
                                    <li><a href="#">个人中心</a></li>
                                    
                                </ul>

                                <!-- Search Icon -->
                                <div id="searchIcon">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </div>

                            </div>
                            <!-- Navbar End -->
                        </div>
                    </nav>

                    <!-- Search Form -->
                    <div class="search-form">
                        <form action="#" method="get">
                            <input type="search" name="search" id="search" placeholder="Type keywords &amp; press enter...">
                            <button type="submit" class="d-none"></button>
                        </form>
                        <!-- Close Icon -->
                        <div class="closeIcon"><i class="fa fa-times" aria-hidden="true"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- ##### Header Area End ##### -->

    <!-- ##### Breadcrumb Area Start ##### -->
    <div class="breadcrumb-area">
        <!-- Top Breadcrumb Area -->
        <div class="top-breadcrumb-area bg-img bg-overlay d-flex align-items-center justify-content-center" style="background-image: url(/img/bg-img/24.jpg);">
            <h2>计划与实施</h2>
        </div>

        <!--<div class="container">-->
            <!--<div class="row">-->
                <!--<div class="col-12">-->
                    <!--<nav aria-label="breadcrumb">-->
                        <!--<ol class="breadcrumb">-->
                            <!--<li class="breadcrumb-item"><a href="#"><i class="fa fa-home"></i> Home</a></li>-->
                            <!--<li class="breadcrumb-item active" aria-current="page">Contact</li>-->
                        <!--</ol>-->
                    <!--</nav>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    </div>
    <!-- ##### Breadcrumb Area End ##### -->
<!--#####element内容开始#####-->
<center>
    <div id = "element" style="width: 1500px;padding-bottom: 25px;padding-top: 15px">
        <div id="app">
            <h2>{{ message }}</h2>
        </div>

        <div id="tableView">
            <!--列表顶部搜索和工具条-->
            <el-row>
                <el-form :inline="true" :model="searchForm" class="demo-form-inline">
                    <el-form-item label="计划与实施">
                        <el-input v-model="searchForm.pname"  placeholder="请输入课程或工号"></el-input>
                    </el-form-item>

                    <el-form-item>
                        <el-button type="primary" icon="search" @click="searchClick">查询</el-button>
                        <el-button type="success" icon="plus" @click="flushClick">刷新</el-button>
                    </el-form-item>
                </el-form>
            </el-row>
            <!--列表-->
            <el-row>
                <el-table
                        :data="tableData"
                        v-loading.body="loading"
                        border
                        @selection-change="selectionChange"
                        style="width: 100%">
                    <el-table-column
                            type="selection"
                            width="55">
                    </el-table-column>
                    <el-table-column
                            prop="RN"
                            label="序号"
                            width="100">
                    </el-table-column>
                    <el-table-column
                            prop="EMPNUM"
                            label="培训工号"
                            width="120">
                    </el-table-column>
                    <el-table-column
                            prop="ENAME"
                            label="培训姓名"
                            width="120">
                    </el-table-column>

                    <el-table-column
                            prop="NAME"
                            label="教师姓名"
                            width="120">
                    </el-table-column>
                    <el-table-column
                            prop="PNAME"
                            label="课程名称"
                            width="120">
                    </el-table-column>
                    <el-table-column
                            prop="PTYPE"
                            label="课程类型"
                            width="120">
                    </el-table-column>
                    <el-table-column
                            prop="PDIRECTION"
                            label="课程方方向"
                            width="120">
                    </el-table-column>
                    <el-table-column
                            prop="P_BEGIN"
                            label="开始时间"
                            width="200">
                    </el-table-column>
                    <el-table-column
                            prop="P_END"
                            label="结束时间"
                            width="200">
                    </el-table-column>
                </el-table>
            </el-row>

            <!--列表底部工具条和分页符-->
            <el-row style="margin-top: 20px" type="flex" justify="end">
                <el-col :span="6" >
                    <el-button :plain="true" type="danger" size="small" icon="delete" @click="removeSelection">删除所选</el-button>
                </el-col>
                <el-col :span="18" >
                    <el-pagination
                            style="float: right"
                            @size-change="pageSizeChange"
                            @current-change="currentPageChange"
                            :current-page="currentPage"
                            :page-sizes="[3,10, 20, 30, 50]"
                            :page-size="pageSize"
                            layout="total, sizes, prev, pager, next, jumper"
                            :total="total">
                    </el-pagination>
                </el-col>
            </el-row>

            <!--编辑界面-------------------------------------------------------------------------------------------------------->
            <el-dialog title="编辑2" :visible.sync="editFormVisible" :close-on-click-modal="false">
                <el-form :model="editForm" label-width="80px" :rules="editFormRules" ref="editForm">
                    <el-form-item label="课程名称">
                        <template>
                            <el-select v-model="editForm.PID"    @change="selCurse($event, item)" placeholder="请选课程名称">
                                <el-option
                                        v-for="item in opts"
                                        :key="item.PID"
                                        :label="item.PNAME"
                                        :value="item.PID">
                                </el-option>
                            </el-select>
                        </template>
                    </el-form-item>
                    <el-form-item label="教师ID">
                        <template>
                            <el-select v-model="editForm.ID" placeholder="请选教师姓名">
                                <el-option
                                        v-for="item in optss"
                                        :key="item.ID"
                                        :label="item.NAME"
                                        :value="item.ID">
                                </el-option>
                            </el-select>
                        </template>
                    </el-form-item>
                    <el-form-item label="开始时间">
                        <template>
                            <div class="block">
                                <el-date-picker
                                        v-model="editForm.P_BEGIN"
                                        type="date"
                                        placeholder="选择日期">
                                </el-date-picker>
                            </div>
                        </template>
                    </el-form-item>
                    <el-form-item label="结束时间">
                        <template>
                            <div class="block">
                                <el-date-picker
                                        v-model="editForm.P_END"
                                        type="date"
                                        placeholder="选择日期">
                                </el-date-picker>
                            </div>
                        </template>
                    </el-form-item>
                    <el-form-item label="学员姓名" prop="EID">
                        <template>
                            <el-select v-model="editForm.EID" placeholder="请选课程名称">
                                <el-option
                                        v-for="item in optsa"
                                        :key="item.EID"
                                        :label="item.ENAME"
                                        :value="item.EID">
                                </el-option>
                            </el-select>
                        </template>
                    </el-form-item>
                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click.native="editFormVisible = false">取消</el-button>
                    <el-button type="primary" @click.native="editSubmit" :loading="editLoading">提交</el-button>
                </div>
            </el-dialog>

        </div>


        <script type="text/javascript">
            var app = new Vue({
                el: '#app'
            });

            var tableView = new Vue({
                el: '#tableView',
                data: {
                    //部门select
                    options:[{PTYPE:1,value:'语言'},{PTYPE:2,value:'css'},{PTYPE:3,value:'编程语言'},{PTYPE:4,value:'编程'},{PTYPE:5,value:'网络设计'}],
                    opts:[],
                    optss:[],
                    optsa:[],
                    //列表数据
                    tableData: [],
                    //显示加载中样式
                    loading:false,
                    //搜索表单
                    searchForm: {
                        pname: ''

                    },
                    //多选值
                    multipleSelection: [],
                    //当前页
                    currentPage:1,
                    //分页大小
                    pageSize:10,
                    //总记录数
                    total:800,
                    //删除的弹出框
                    deleteVisible:false,
                    //编辑界面是否显示
                    editFormVisible: false,
                    editLoading: false,
                    goUrl:'',
                    editFormRules: {
                        name: [
                            { required: true, message: '请输入课程', trigger: 'blur' }
                        ]
                    },
                    //编辑界面数据
                    editForm: {
                        TID:'',
                        NAME: '',
                        P_BEGIN: '',
                        P_END: '',
                        BATCH:''
                    },
                },
                created:function(){
                    //在 then的内部不能使用Vue的实例化的this, 因为在内部 this 没有被绑定。
                    var self = this;
                    axios.post('/plan/toList',{'pageNo':this.currentPage,'pageSize':this.pageSize}).then(function(response){
                        console.log(response.data);
                        //alert(response.data.total);
                        self.total=response.data.total;
                        self.tableData = response.data.pageData;
                        //alert(JSON.stringify(response.data.pageData));
                    });
                    axios.post('/plan/courseList1').then(function(response) {
                        self.opts = response.data;
                    });

                    axios.post('/plan/planList').then(function(response) {
                        self.optsa = response.data;
                    });
                },


                methods:{
                    //表格重新加载数据
                    loadingData:function() {
                        var _self = this;
                        _self.loading = true;
                        var self = this;
                        //var start =(this.currentPage-1)*this.pageSize;
                        // var end =this.currentPage*this.pageSize+1;
                        var searchForm={'pageNo':this.currentPage,'pageSize':this.pageSize,'pname':this.searchForm.pname};
                        //alert(JSON.stringify(searchForm));
                        axios.post('/plan/toList',searchForm).then(function(response){
                            console.log(response.data);
                            // alert(222);
                            _self.total=response.data.total;
                            _self.tableData = response.data.pageData;
                            //_self.multipleSelection=response.data.data;
                        })
                        console.log(_self.currentPage);
                        setTimeout(function(){
                            console.info("加载数据成功");
                            _self.loading = false;
                        },300);
                    },
                    //刷新
                    flushClick:function () {
                        this.searchForm={
                            pname: ''
                        }
                        this.loadingData();//重新加载数据
                    },

                    //表格编辑事件
                    editClick:function(row) {
                        this.goUrl="/plan/update";
                        this.editFormVisible = true;
                        this.editForm = Object.assign({}, row);
                    },
                    //单条删除
                    deleteClick:function(row) {
                        //alert(JSON.stringify(row));
                        var _self = this;
                        this.$confirm('确认删除' + row.P_ID +'吗?', '提示', {
                            type: 'warning'
                        }).then(function(){
                            var  url="/plan/delete/"+row.P_ID;
                            axios.get(url).then(function (response) {
                                //alert(url);
                                if(response.data>0){
                                    _self.$message({
                                        message: row.P_ID + '删除成功',
                                        type: 'success'
                                    });
                                    _self.loadingData();//重新加载数据
                                }
                            });
                        }).catch(function(e){
                            if(e != "cancel")
                                console.log("出现错误：" + e);
                        });
                    },
                    //新建事件
                    addClick:function() {
                        this.goUrl="/plan/add";
                        var _self = this;
                        //清空缓冲数据
                        this.editForm={
                            TID:'',
                            NAME: '',
                            P_BEGIN: '',
                            P_END: '',
                            BATCH:''
                        }
                        //显示隐藏的form表单
                        this.editFormVisible = true;
                        _self.loadingData();//重新加载数据
                    },
                    //表格查询事件
                    searchClick:function() {
                        var self = this;
                        self.loadingData();//重新加载数据
                    },
                    //表格勾选事件
                    selectionChange:function(val) {
                        for(var i=0;i<val.length;i++) {
                            var row = val[i];
                        }
                        this.multipleSelection = val;
                        console.info(val);
                    },
                    //删除所选，批量删除
                    removeSelection:function() {
                        var _self = this;
                        var multipleSelection = this.multipleSelection;
                        if(multipleSelection.length < 1) {
                            _self.$message({
                                message: '请至少选中一条记录',
                                type: 'error'
                            });
                            return;
                        }
                        var ids = "";
                        for(var i=0;i<multipleSelection.length;i++) {
                            var row = multipleSelection[i];
                            ids += row.P_ID + ","
                        }
                        this.$confirm('确认删除' + ids +'吗?', '提示', {
                            type: 'warning'
                        }).then(function(){
                            var  url="/plan/batchDel/"+ids;
                            axios.get(url).then(function (response) {
                                //alert(response.data);
                                var temp="";
                                if(response.data>0){
                                    temp="删除成功";
                                }else {
                                    temp="删除失败";
                                }
                                _self.$message({
                                    message: ids + temp,
                                    type: 'success'
                                });
                                _self.loadingData();//重新加载数据
                            });

                        }).catch(function(e){
                            if(e != "cancel")
                                console.log("出现错误：" + e);
                        });
                    },
                    //分页大小修改事件
                    pageSizeChange:function(val) {
                        console.log('每页 ' + val +' 条');
                        this.pageSize = val;
                        var _self = this;
                        _self.loadingData();//重新加载数据
                    },
                    //当前页修改事件
                    currentPageChange:function(val) {
                        this.currentPage = val;
                        console.log('当前页: ' + val);
                        var _self = this;
                        _self.loadingData();//重新加载数据
                    },
                    //保存点击事件
                    editSubmit:function(){
                        var _self = this;
                        _self.loading = true;
                        var formData =this.editForm;
                        //alert(formData);
                        var goUrl=this.goUrl;
                        //alert(goUrl);
                        axios.post(goUrl,formData).then(function(response){
                            // console.log(response.data);
                            //alert(222);
                            // self.total=response.data.total;
                            if(response.data>0){
                                _self.editFormVisible = false;
                                _self.loadingData();//重新加载数据
                            }
                        })
                        console.info(this.editForm);
                    },
                    selCurse:function(e,item){
                        var self=this;
                        var url="/plan/courseList/"+e;
                        axios.post(url).then(function(response) {
                            self.optss = response.data;
                        });
                    }
                }
            })
        </script>
    </div>
</center>
    <!--#####element的script结束#####-->
    

    <!-- ##### Footer Area Start ##### -->
    <footer class="footer-area bg-img" style="background-image: url(/img/bg-img/3.jpg);">
        <!-- Main Footer Area -->
        <div class="main-footer-area">
            <div class="container">
                <div class="row">

                    <!-- Single Footer Widget -->
                    <div class="col-12 col-sm-6 col-lg-3">
                        <div class="single-footer-widget">
                            <div class="footer-logo mb-30">
                                <a href="#"><img src="../img/core-img/logo.png" alt=""></a>
                            </div>
                            <p>欢迎回家</p>
                            <div class="social-info">
                                <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                            </div>
                        </div>
                    </div>

                    <!-- Single Footer Widget -->
                    <div class="col-12 col-sm-6 col-lg-3">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h5>QUICK LINK</h5>
                            </div>
                            <nav class="widget-nav">
                                <ul>
                                    <li><a href="#">Purchase</a></li>
                                    <li><a href="#">FAQs</a></li>
                                    <li><a href="#">Payment</a></li>
                                    <li><a href="#">News</a></li>
                                    <li><a href="#">Return</a></li>
                                    <li><a href="#">Advertise</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Career</a></li>
                                    <li><a href="#">Orders</a></li>
                                    <li><a href="#">Policities</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>

                    <!-- Single Footer Widget -->
                    <div class="col-12 col-sm-6 col-lg-3">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h5>BEST SELLER</h5>
                            </div>

                            <!-- Single Best Seller Products -->
                            <div class="single-best-seller-product d-flex align-items-center">
                                <div class="product-thumbnail">
                                    <a href="shop-details.html"><img src="../img/bg-img/4.jpg" alt=""></a>
                                </div>
                                <div class="product-info">
                                    <a href="shop-details.html">Cactus Flower</a>
                                    <p>$10.99</p>
                                </div>
                            </div>

                            <!-- Single Best Seller Products -->
                            <div class="single-best-seller-product d-flex align-items-center">
                                <div class="product-thumbnail">
                                    <a href="shop-details.html"><img src="../img/bg-img/5.jpg" alt=""></a>
                                </div>
                                <div class="product-info">
                                    <a href="shop-details.html">Tulip Flower</a>
                                    <p>$11.99</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Single Footer Widget -->
                    <div class="col-12 col-sm-6 col-lg-3">
                        <div class="single-footer-widget">
                            <div class="widget-title">
                                <h5>CONTACT</h5>
                            </div>

                            <div class="contact-information">
                                <p><span>地址:</span> 河南省-郑州市-金水区-杨金路-牛顿国际</p>
                                <p><span>联系方式:</span> +1 234 122 122</p>
                                <p><span>邮箱:</span> 好好学习@gmail.com</p>
                                <p><span>Open hours:</span> Mon - Sun: 8 AM to 9 PM</p>
                                <p><span>Happy hours:</span> Sat: 2 PM to 4 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Bottom Area -->
        <div class="footer-bottom-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="border-line"></div>
                    </div>
                    <!-- Copywrite Text -->
                    <div class="col-12 col-md-6">
                        <div class="copywrite-text">
                            <p>&copy;
Copyright &copy;<script>document.write(new Date().getFullYear());</script> - Colorlib All rights reserved | More Templates <a href="http://www.cssmoban.com/" target="_blank" title="项目首页">项目首页</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a>

</p>
                        </div>
                    </div>
                    <!-- Footer Nav -->
                    <div class="col-12 col-md-6">
                        <div class="footer-nav">
                            <nav>
                                <ul>
                                    <li><a href="#">Home</a></li>
                                    <li><a href="#">About</a></li>
                                    <li><a href="#">Service</a></li>
                                    <li><a href="#">Portfolio</a></li>
                                    <li><a href="#">Blog</a></li>
                                    <li><a href="#">Contact</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- ##### Footer Area End ##### -->


</body>

</html>